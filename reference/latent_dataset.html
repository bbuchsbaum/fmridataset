<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Latent Dataset Interface — latent_dataset • fmridataset</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Latent Dataset Interface — latent_dataset"><meta name="description" content="A specialized dataset interface for working with latent space representations
of fMRI data. Unlike traditional fMRI datasets that work with voxel-space data,
latent datasets operate on compressed representations using basis functions.
This interface is designed for data that has been decomposed into temporal
components (basis functions) and spatial loadings, such as from PCA, ICA,
or dictionary learning methods.
Creates a dataset object for working with latent space representations of fMRI data.
This is the primary constructor for latent datasets."><meta property="og:description" content="A specialized dataset interface for working with latent space representations
of fMRI data. Unlike traditional fMRI datasets that work with voxel-space data,
latent datasets operate on compressed representations using basis functions.
This interface is designed for data that has been decomposed into temporal
components (basis functions) and spatial loadings, such as from PCA, ICA,
or dictionary learning methods.
Creates a dataset object for working with latent space representations of fMRI data.
This is the primary constructor for latent datasets."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fmridataset</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/architecture-overview.html">Architecture Deep Dive: Design Principles and Extensibility</a></li>
    <li><a class="dropdown-item" href="../articles/backend-development-basics.html">Backend Development Basics: Creating Custom Storage Backends</a></li>
    <li><a class="dropdown-item" href="../articles/backend-registry.html">Backend Registry: Extending Data Format Support</a></li>
    <li><a class="dropdown-item" href="../articles/extending-backends.html">Advanced Backend Development: Storage Extensions</a></li>
    <li><a class="dropdown-item" href="../articles/fmridataset-intro.html">Getting Started with fmridataset</a></li>
    <li><a class="dropdown-item" href="../articles/h5-backend-usage.html">HDF5 Storage: High-Performance Data Management for Large-Scale fMRI Studies</a></li>
    <li><a class="dropdown-item" href="../articles/study-level-analysis.html">Scaling to Study-Level Analysis: From Single Subjects to Group Studies</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bbuchsbaum/fmridataset/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Latent Dataset Interface</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/fmridataset/blob/main/R/latent_dataset.R" class="external-link"><code>R/latent_dataset.R</code></a></small>
      <div class="d-none name"><code>latent_dataset.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A specialized dataset interface for working with latent space representations
of fMRI data. Unlike traditional fMRI datasets that work with voxel-space data,
latent datasets operate on compressed representations using basis functions.</p>
<p>This interface is designed for data that has been decomposed into temporal
components (basis functions) and spatial loadings, such as from PCA, ICA,
or dictionary learning methods.</p>
<p>Creates a dataset object for working with latent space representations of fMRI data.
This is the primary constructor for latent datasets.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">latent_dataset</span><span class="op">(</span></span>
<span>  <span class="va">source</span>,</span>
<span>  <span class="va">TR</span>,</span>
<span>  <span class="va">run_length</span>,</span>
<span>  event_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  base_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  censor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preload <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-source">source<a class="anchor" aria-label="anchor" href="#arg-source"></a></dt>
<dd><p>Character vector of file paths to LatentNeuroVec HDF5 files (.lv.h5) or
a list of LatentNeuroVec objects from the fmristore package.</p></dd>


<dt id="arg-tr">TR<a class="anchor" aria-label="anchor" href="#arg-tr"></a></dt>
<dd><p>The repetition time in seconds.</p></dd>


<dt id="arg-run-length">run_length<a class="anchor" aria-label="anchor" href="#arg-run-length"></a></dt>
<dd><p>Vector of integers indicating the number of scans in each run.</p></dd>


<dt id="arg-event-table">event_table<a class="anchor" aria-label="anchor" href="#arg-event-table"></a></dt>
<dd><p>Optional data.frame containing event onsets and experimental variables.</p></dd>


<dt id="arg-base-path">base_path<a class="anchor" aria-label="anchor" href="#arg-base-path"></a></dt>
<dd><p>Base directory for relative file paths.</p></dd>


<dt id="arg-censor">censor<a class="anchor" aria-label="anchor" href="#arg-censor"></a></dt>
<dd><p>Optional binary vector indicating which scans to remove.</p></dd>


<dt id="arg-preload">preload<a class="anchor" aria-label="anchor" href="#arg-preload"></a></dt>
<dd><p>Logical indicating whether to preload all data into memory.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>latent_dataset</code> object with class <code>c("latent_dataset", "fmri_dataset")</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="key-differences-from-standard-datasets-">Key Differences from Standard Datasets:<a class="anchor" aria-label="anchor" href="#key-differences-from-standard-datasets-"></a></h3>

<ul><li><p><strong>Data Access</strong>: Returns latent scores (time × components) instead of voxel data</p></li>
<li><p><strong>Mask</strong>: Represents active components, not spatial voxels</p></li>
<li><p><strong>Dimensions</strong>: Component space rather than voxel space</p></li>
<li><p><strong>Reconstruction</strong>: Can optionally reconstruct to voxel space on demand</p></li>
</ul></div>

<div class="section">
<h3 id="data-structure-">Data Structure:<a class="anchor" aria-label="anchor" href="#data-structure-"></a></h3>


<p>Latent representations store data as:</p><ul><li><p><code>basis</code>: Temporal components (n_timepoints × k_components)</p></li>
<li><p><code>loadings</code>: Spatial components (n_voxels × k_components)</p></li>
<li><p><code>offset</code>: Optional per-voxel offset terms</p></li>
<li><p>Reconstruction: <code>data = basis %*% t(loadings) + offset</code></p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other latent_data:
<code><a href="get_component_info.html">get_component_info()</a></code>,
<code><a href="get_latent_scores.html">get_latent_scores()</a></code>,
<code><a href="get_spatial_loadings.html">get_spatial_loadings()</a></code>,
<code><a href="reconstruct_voxels.html">reconstruct_voxels()</a></code></p>
<p>Other latent_data:
<code><a href="get_component_info.html">get_component_info()</a></code>,
<code><a href="get_latent_scores.html">get_latent_scores()</a></code>,
<code><a href="get_spatial_loadings.html">get_spatial_loadings()</a></code>,
<code><a href="reconstruct_voxels.html">reconstruct_voxels()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># From LatentNeuroVec files</span></span></span>
<span class="r-in"><span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu">latent_dataset</span><span class="op">(</span></span></span>
<span class="r-in"><span>  source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"run1.lv.h5"</span>, <span class="st">"run2.lv.h5"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  TR <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  run_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># From pre-loaded objects</span></span></span>
<span class="r-in"><span><span class="va">lvec1</span> <span class="op">&lt;-</span> <span class="fu">fmristore</span><span class="fu">::</span><span class="fu">read_vec</span><span class="op">(</span><span class="st">"run1.lv.h5"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lvec2</span> <span class="op">&lt;-</span> <span class="fu">fmristore</span><span class="fu">::</span><span class="fu">read_vec</span><span class="op">(</span><span class="st">"run2.lv.h5"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu">latent_dataset</span><span class="op">(</span></span></span>
<span class="r-in"><span>  source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">lvec1</span>, <span class="va">lvec2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  TR <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  run_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access latent scores</span></span></span>
<span class="r-in"><span><span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_latent_scores.html">get_latent_scores</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get component metadata</span></span></span>
<span class="r-in"><span><span class="va">comp_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_component_info.html">get_component_info</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bradley Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

