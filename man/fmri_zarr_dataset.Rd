% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/zarr_dataset_constructor.R
\name{fmri_zarr_dataset}
\alias{fmri_zarr_dataset}
\title{Create an fMRI Dataset from Zarr Arrays}
\usage{
fmri_zarr_dataset(
  zarr_source,
  data_key = "data",
  mask_key = "mask",
  TR,
  run_length,
  event_table = data.frame(),
  censor = NULL,
  preload = FALSE,
  cache_size = 100
)
}
\arguments{
\item{zarr_source}{Path to Zarr store (directory, zip file, or URL)}

\item{data_key}{Character key for the main data array within the store (default: "data")}

\item{mask_key}{Character key for the mask array (default: "mask"). Set to NULL for no mask.}

\item{TR}{The repetition time in seconds}

\item{run_length}{Vector of integers indicating the number of scans in each run}

\item{event_table}{Optional data.frame containing event onsets and experimental variables}

\item{censor}{Optional binary vector indicating which scans to remove}

\item{preload}{Whether to load all data into memory (default: FALSE)}

\item{cache_size}{Number of chunks to cache in memory (default: 100)}
}
\value{
An fMRI dataset object of class c("fmri_file_dataset", "volumetric_dataset", "fmri_dataset", "list")
}
\description{
Creates an fMRI dataset object from Zarr array files. Zarr is a cloud-native
array format that supports chunked, compressed storage and is ideal for
large neuroimaging datasets.
}
\details{
The Zarr backend expects data organized as a 4D array with dimensions
(x, y, z, time). The data is accessed lazily by default, loading only
the requested chunks into memory.

Zarr stores can be:
\itemize{
\item Local directories containing .zarr data
\item Zip files containing zarr arrays
\item Remote URLs (S3, GCS, HTTP) for cloud-hosted data
}
}
\examples{
\dontrun{
# Local Zarr store
dataset <- fmri_zarr_dataset(
  "path/to/data.zarr",
  TR = 2,
  run_length = c(150, 150, 150)
)

# Remote S3 store with custom keys
dataset <- fmri_zarr_dataset(
  "s3://bucket/neuroimaging/subject01.zarr",
  data_key = "bold/data",
  mask_key = "bold/mask",
  TR = 1.5,
  run_length = 300
)

# Preload small dataset into memory
dataset <- fmri_zarr_dataset(
  "small_data.zarr",
  TR = 2,
  run_length = 100,
  preload = TRUE
)
}

}
\seealso{
\code{\link{zarr_backend}}, \code{\link{fmri_dataset}}
}
