% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/latent_dataset.R
\name{latent_dataset}
\alias{latent_dataset}
\title{Latent Dataset Interface}
\usage{
latent_dataset(
  source,
  TR,
  run_length,
  event_table = data.frame(),
  base_path = ".",
  censor = NULL,
  preload = FALSE
)
}
\arguments{
\item{source}{Character vector of file paths to LatentNeuroVec HDF5 files (.lv.h5) or
a list of LatentNeuroVec objects from the fmristore package.}

\item{TR}{The repetition time in seconds.}

\item{run_length}{Vector of integers indicating the number of scans in each run.}

\item{event_table}{Optional data.frame containing event onsets and experimental variables.}

\item{base_path}{Base directory for relative file paths.}

\item{censor}{Optional binary vector indicating which scans to remove.}

\item{preload}{Logical indicating whether to preload all data into memory.}
}
\value{
A \code{latent_dataset} object with class \code{c("latent_dataset", "fmri_dataset")}.
}
\description{
A specialized dataset interface for working with latent space representations
of fMRI data. Unlike traditional fMRI datasets that work with voxel-space data,
latent datasets operate on compressed representations using basis functions.

This interface is designed for data that has been decomposed into temporal
components (basis functions) and spatial loadings, such as from PCA, ICA,
or dictionary learning methods.

Creates a dataset object for working with latent space representations of fMRI data.
This is the primary constructor for latent datasets.
}
\details{
\subsection{Key Differences from Standard Datasets:}{
\itemize{
\item \strong{Data Access}: Returns latent scores (time × components) instead of voxel data
\item \strong{Mask}: Represents active components, not spatial voxels
\item \strong{Dimensions}: Component space rather than voxel space
\item \strong{Reconstruction}: Can optionally reconstruct to voxel space on demand
}
}

\subsection{Data Structure:}{

Latent representations store data as:
\itemize{
\item \code{basis}: Temporal components (n_timepoints × k_components)
\item \code{loadings}: Spatial components (n_voxels × k_components)
\item \code{offset}: Optional per-voxel offset terms
\item Reconstruction: \code{data = basis \%*\% t(loadings) + offset}
}
}
}
\examples{
\dontrun{
# From LatentNeuroVec files
dataset <- latent_dataset(
  source = c("run1.lv.h5", "run2.lv.h5"),
  TR = 2,
  run_length = c(100, 100)
)

# From pre-loaded objects
lvec1 <- fmristore::read_vec("run1.lv.h5")
lvec2 <- fmristore::read_vec("run2.lv.h5")
dataset <- latent_dataset(
  source = list(lvec1, lvec2),
  TR = 2,
  run_length = c(100, 100)
)

# Access latent scores
scores <- get_latent_scores(dataset)

# Get component metadata
comp_info <- get_component_info(dataset)
}
}
\seealso{
Other latent_data: 
\code{\link{get_component_info}()},
\code{\link{get_latent_scores}()},
\code{\link{get_spatial_loadings}()},
\code{\link{reconstruct_voxels}()}

Other latent_data: 
\code{\link{get_component_info}()},
\code{\link{get_latent_scores}()},
\code{\link{get_spatial_loadings}()},
\code{\link{reconstruct_voxels}()}
}
\concept{latent_data}
