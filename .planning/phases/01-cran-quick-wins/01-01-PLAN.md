---
phase: 01-cran-quick-wins
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - DESCRIPTION
autonomous: true

must_haves:
  truths:
    - "R CMD check produces no WARNING about unstated test dependencies"
    - "R CMD check produces no NOTE about unstated vignette dependencies"
  artifacts:
    - path: "DESCRIPTION"
      provides: "All test and vignette dependencies declared in Suggests"
      contains: "DelayedArray"
  key_links:
    - from: "tests/testthat/*.R"
      to: "DESCRIPTION Suggests"
      via: "dependency declaration"
      pattern: "DelayedArray|rhdf5|withr|iterators|devtools|microbenchmark|pryr"
---

<objective>
Add missing test and vignette dependencies to DESCRIPTION Suggests field

Purpose: R CMD check requires all packages used in tests and vignettes to be declared in Suggests. Currently missing: DelayedArray, DelayedMatrixStats, devtools, iterators, rhdf5, withr (tests) and microbenchmark, pryr (vignettes).

Output: Updated DESCRIPTION with all dependencies properly declared, eliminating the WARNING and one NOTE from R CMD check.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-cran-quick-wins/01-RESEARCH.md

@DESCRIPTION
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add missing test dependencies to Suggests</name>
  <files>DESCRIPTION</files>
  <action>
Add the following packages to the Suggests field in DESCRIPTION (alphabetical order within existing list):

- DelayedArray (used in test_study_backend_memory.R and DelayedArray tests)
- DelayedMatrixStats (used alongside DelayedArray for matrix stats)
- devtools (used in test helpers)
- iterators (used in test-golden-datasets.R, test_edge_cases.R)
- rhdf5 (used in test_backend_integration.R for HDF5 testing)
- withr (used in 7+ test files for temp environment setup)

Format: Follow existing DESCRIPTION style with proper indentation. Maintain alphabetical ordering where practical.

Do NOT add version constraints unless there's a specific reason (the research indicates none needed).
  </action>
  <verify>
Run: grep -E "DelayedArray|DelayedMatrixStats|rhdf5|devtools|iterators|withr" DESCRIPTION
Expected: All six packages appear in Suggests section
  </verify>
  <done>DESCRIPTION contains DelayedArray, DelayedMatrixStats, devtools, iterators, rhdf5, and withr in Suggests field</done>
</task>

<task type="auto">
  <name>Task 2: Add missing vignette dependencies to Suggests</name>
  <files>DESCRIPTION</files>
  <action>
Add the following packages to the Suggests field in DESCRIPTION:

- microbenchmark (used in vignettes for performance comparisons)
- pryr (used in vignettes for memory profiling)

These packages are used with :: notation in vignettes, which requires them to be declared even though they're optional.
  </action>
  <verify>
Run: grep -E "microbenchmark|pryr" DESCRIPTION
Expected: Both packages appear in Suggests section
  </verify>
  <done>DESCRIPTION contains microbenchmark and pryr in Suggests field</done>
</task>

</tasks>

<verification>
Run R CMD check subset to verify dependencies:
```bash
R -e "devtools::check()" 2>&1 | grep -E "unstated dependencies|WARNING"
```

Expected: No WARNING about unstated dependencies in tests, no NOTE about unstated dependencies in vignettes.
</verification>

<success_criteria>
- DESCRIPTION Suggests field includes: DelayedArray, DelayedMatrixStats, devtools, iterators, rhdf5, withr, microbenchmark, pryr
- R CMD check no longer produces WARNING about unstated test dependencies
- R CMD check no longer produces NOTE about unstated vignette dependencies
</success_criteria>

<output>
After completion, create `.planning/phases/01-cran-quick-wins/01-01-SUMMARY.md`
</output>
