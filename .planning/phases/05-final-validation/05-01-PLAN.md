---
phase: 05-final-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - DESCRIPTION
autonomous: true

must_haves:
  truths:
    - "Remotes field is not present in DESCRIPTION"
    - "blosc package is listed in Suggests"
    - "DelayedArray package is listed in Suggests"
    - "DelayedMatrixStats package is listed in Suggests"
  artifacts:
    - path: "DESCRIPTION"
      provides: "Package metadata with CRAN-compatible dependency declarations"
      contains: ["blosc", "DelayedArray", "DelayedMatrixStats"]
  key_links:
    - from: "DESCRIPTION"
      to: "tests using zarr"
      via: "Suggests field"
      pattern: "blosc"
---

<objective>
Fix DESCRIPTION file to resolve CRAN check warnings about dependencies.

Purpose: The current DESCRIPTION has a Remotes field (not allowed on CRAN) and is missing packages that tests use (blosc, DelayedArray, DelayedMatrixStats). These cause warnings during R CMD check --as-cran.

Output: Updated DESCRIPTION file with proper dependency declarations that pass CRAN checks.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-final-validation/05-RESEARCH.md

@DESCRIPTION
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update DESCRIPTION dependencies</name>
  <files>DESCRIPTION</files>
  <action>
  Edit DESCRIPTION to make these changes:

  1. REMOVE the entire Remotes: section (lines starting with "Remotes:" through the last remote reference). This field is not recognized by CRAN.

  2. ADD these packages to Suggests (maintain alphabetical order):
     - blosc (required by zarr for compression codec)
     - DelayedArray (used in tests for delayed array operations)
     - DelayedMatrixStats (used in tests for matrix statistics)

  3. Keep Additional_repositories field COMMENTED OUT for now since bidser/fmristore are GitHub packages (would need a drat repo). The warning about non-mainstream Suggests is acceptable - document in cran-comments.md instead.

  The updated Suggests section should be alphabetically ordered. Insert new packages in correct position:
  - arrow (existing)
  - bench (existing)
  - bidser (existing)
  - blosc (NEW)
  - crayon (existing)
  - DelayedArray (NEW)
  - DelayedMatrixStats (NEW)
  - devtools (existing)
  - dplyr (existing)
  - ... etc
  </action>
  <verify>
  Run: `grep -A 30 "^Suggests:" DESCRIPTION | head -35` to confirm blosc, DelayedArray, DelayedMatrixStats are present
  Run: `grep "^Remotes:" DESCRIPTION` should return nothing (no Remotes field)
  Run: `R CMD build . --no-manual 2>&1 | head -10` to verify package builds
  </verify>
  <done>
  - Remotes field is completely removed from DESCRIPTION
  - blosc appears in Suggests in correct alphabetical position
  - DelayedArray appears in Suggests in correct alphabetical position
  - DelayedMatrixStats appears in Suggests in correct alphabetical position
  - Package builds without errors
  </done>
</task>

</tasks>

<verification>
- `grep "^Remotes:" DESCRIPTION` returns empty (no Remotes field)
- `grep "blosc" DESCRIPTION` shows blosc in Suggests
- `grep "DelayedArray" DESCRIPTION` shows DelayedArray in Suggests
- `grep "DelayedMatrixStats" DESCRIPTION` shows DelayedMatrixStats in Suggests
- `R CMD build . --no-manual` succeeds
</verification>

<success_criteria>
DESCRIPTION file is CRAN-compatible:
1. No Remotes field present
2. blosc, DelayedArray, DelayedMatrixStats are in Suggests (alphabetically ordered)
3. Package builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/05-final-validation/05-01-SUMMARY.md`
</output>
